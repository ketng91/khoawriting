<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Vietnamese to English Practice-Lớp Anh thầy Kết</title>
<style>
body { 
  margin-left: 4cm; 
  margin-right: 4cm;
  font-family: Arial, sans-serif;
  padding: 20px;
}

/* list box topic */
#topicSelect {
  font-size: 20px;
  padding: 5px 10px;
  margin-bottom: 20px;
}

/* câu VN/EN */
.sentence { margin-bottom: 20px; font-size: 25px; line-height: 1.6; }
.highlight { font-weight: bold; padding: 2px 4px; border-radius: 4px; } 

/* các input */
button { padding: 8px 15px; margin-right: 10px; cursor: pointer; }  
.green { background: lightgreen; }
.blue { background: lightblue; }
.yellow { background: khaki; }
.pink { background: pink; }

.input-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.input-row input { 
   padding: 6px; 
   width: 400px;
   font-size: 22px;
}
.arrow-icon { font-size: 18px; font-weight: bold; }
.result { margin-left: 10px; font-weight: bold;font-size: 22px; }
.correct { color: green; font-weight: bold; font-size: 18px;}
.wrong { color: red; font-weight: bold; font-size: 18px;}
.full-answer-box { width: 95%; height: 100px; padding: 8px; font-size: 25px;font-family: Arial; color: blue}
.full-submit { padding: 6px 12px; }

/* chữ ký thầy Kết */
.signature {
  font-size: 18px;
  font-family: Arial;
  font-style: italic;
  font-weight: bold;
  color: #004aad;
  text-align: right;
  margin-top: -25px;
}

/* ====== PHÁO HOA ====== */
.confetti {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 10px;
  height: 10px;
  background: red;
  opacity: 0.9;
  animation: pop 900ms ease-out forwards;
}
@keyframes pop {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  50% {
    transform: 
      translate(
        calc(var(--x) * 0.5),
        calc(var(--y) * 0.4)
      )
      scale(1.1);
    opacity: 1;
  }
  100% {
    transform: 
      translate(var(--x), var(--y))
      scale(0.5);
    opacity: 0;
  }
}
</style>
</head>

<body>

<!-- Chọn topic -->
<select id="topicSelect">
  <option value="Environment">Environment</option>
  <option value="Technology">Technology</option>
</select>

<!-- Câu VN + EN -->
<div class="sentence" id="vnSentence"></div>
<div class="sentence" id="enSentence"></div>

<!-- Các input -->
<div id="inputs"></div>

<textarea id="fullAnswer" class="full-answer-box" placeholder="Type the full sentence..."></textarea><br>

<button id="submitBtn" class="full-submit">Submit</button>
<button id="changeBtn" style="margin-left:15px;">Change</button>

<div class="signature">Lớp Anh thầy Kết</div>
<div id="fullResult"></div>

<script>
/* ====== DATA THEO TOPIC ====== */
const dataByTopic = {
  "Environment": [
    {
      vn: "Các chính phủ nên thực thi các quy định môi trường nghiêm ngặt hơn để giảm thiểu những tác động tiêu cực của nóng lên toàn cầu đối với đa dạng sinh học.",
      parts: [
        { vn: "thực thi", en: "implement", color: "green" },
        { vn: "các quy định môi trường", en: "environmental regulations", color: "yellow" },
        { vn: "giảm thiểu", en: "mitigate", color: "blue" },
        { vn: "đa dạng sinh học", en: "biodiversity", color: "pink" }
      ],
      full: "Governments should implement stricter environmental regulations to mitigate the adverse effects of global warming on biodiversity."
    },
{
      vn: "Việc áp dụng các nguồn năng lượng tái tạo là then chốt để thúc đẩy sự phát triển bền vững và giảm thiểu tác động môi trường lâu dài của các hoạt động công nghiệp.",
      parts: [
        { vn: "các nguồn năng lượng tái tạo", en: "renewable energy sources", color: "green" },
        { vn: "sự phát triển bền vững", en: "sustainable development", color: "yellow" },
        { vn: "tác động môi trường", en: "environmental impact", color: "blue" },
      ],
      full: "Adopting renewable energy sources is crucial to promote sustainable development and reduce the long-term environmental impact of industrial activities."
    },



  ],
  "Technology": [
    {
      vn: "Sự tiến bộ nhanh chóng của trí tuệ nhân tạo có thể đòi hỏi một sự tái cấu trúc cơ bản đối với thị trường việc làm truyền thống trên toàn cầu.",
      parts: [
        { vn: "trí tuệ nhân tạo", en: "artificial intelligence", color: "green" },
        { vn: "đòi hỏi", en: "necessitate", color: "yellow" },
        { vn: "sự tái cấu trúc", en: "restructuring", color: "blue" },
        { vn: "thị trường việc làm", en: "job market", color: "pink" }
      ],
      full: "The rapid advancement of artificial intelligence may necessitate a fundamental restructuring of the traditional global job market."
    },
    {
      vn: "Khuyến khích các dự án nhóm tại trường học có thể thúc đẩy các kỹ năng hợp tác thiết yếu và nâng cao sự phát triển xã hội toàn diện của học sinh.",
      parts: [
        { vn: "các dự án nhóm", en: "group projects", color: "yellow" },
        { vn: "các kỹ năng hợp tác", en: "collaborative skills", color: "blue" },
        { vn: "nâng cao", en: "enhance", color: "green" },
        { vn: "sự phát triển xã hội", en: "social development", color: "pink" }
      ],
      full: "Encouraging group projects in schools can foster essential collaborative skills and enhance the overall social development of students."
    }
  ]
};

let currentTopic = "Environment";
let currentIndex = 0;

/* ====== LOAD HÀM ====== */
function load() {
  const topicData = dataByTopic[currentTopic];
  const item = topicData[currentIndex];

  // highlight
  let html = item.vn;
  item.parts.forEach(p => {
    html = html.replace(new RegExp(p.vn, "gi"), `<span class="highlight ${p.color}">${p.vn}</span>`);
  });
  document.getElementById("vnSentence").innerHTML = html;

  // xóa input cũ
  const container = document.getElementById("inputs");
  container.innerHTML = "";
  item.parts.forEach((p, idx) => {
    const first = p.en[0];
    const wc = p.en.split(" ").length;
    const hint = `${p.vn} (${first}... ; ${wc} word${wc>1?'s':''})`;

    const row = document.createElement("div");
    row.className = "input-row";
    row.innerHTML = `
      <span class="arrow-icon" style="color:${p.color};">➤</span>
      <input id="box${idx}" placeholder="${hint}">
      <button onclick="checkWord(${idx})">Check</button>
      <span id="res${idx}" class="result"></span>
    `;
    container.appendChild(row);

    row.querySelector("input").addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        checkWord(idx);
      }
    });
  });

  document.getElementById("fullAnswer").value = "";
  document.getElementById("fullResult").innerHTML = "";
}

/* ====== NÚT CHANGE ====== */
document.getElementById("changeBtn").onclick = () => {
  const topicData = dataByTopic[currentTopic];
  currentIndex = (currentIndex + 1) % topicData.length;
  load();
};

/* ====== CHỌN TOPIC ====== */
document.getElementById("topicSelect").addEventListener("change", (e) => {
  currentTopic = e.target.value;
  currentIndex = 0;
  load();
});

/* ====== KIỂM TRA TỪ ====== */
window.checkWord = function(i) {
  const item = dataByTopic[currentTopic][currentIndex];
  const user = document.getElementById(`box${i}`).value.trim();
  const key = item.parts[i].en;
  const res = document.getElementById(`res${i}`);
  if (user.toLowerCase() === key.toLowerCase()) {
    res.innerHTML = `<span class="correct">✔ Correct</span>`;
    firework();
  } else {
    res.innerHTML = `<span class="wrong">✘ ${key}</span>`;
  }
};

/* ====== KIỂM TRA FULL CÂU ====== */
document.getElementById("submitBtn").onclick = () => {
  const item = dataByTopic[currentTopic][currentIndex];
  const user = document.getElementById("fullAnswer").value.trim();
  const res = document.getElementById("fullResult");
  if (user.toLowerCase() === item.full.toLowerCase()) {
    res.innerHTML = `<span class="correct">✔ Correct</span>`;
  } else {
    res.innerHTML = `<span class="wrong">✘ ${item.full}</span>`;
  }
};

/* ====== ENTER SUBMIT ====== */
document.getElementById("fullAnswer").addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    e.preventDefault();
    document.getElementById("submitBtn").click();
  }
});

/* ====== PHÁO HOA ====== */
function firework() {
  for (let i = 0; i < 25; i++) {
    const conf = document.createElement("div");
    conf.className = "confetti";
    conf.style.setProperty("--x", (Math.random() - 0.5) * 600 + "px");
    conf.style.setProperty("--y", (Math.random() - 0.5) * 600 + "px");
    conf.style.backgroundColor = `hsl(${Math.random()*360},90%,60%)`;
    document.body.appendChild(conf);
    setTimeout(() => conf.remove(), 900);
  }
}

load();
</script>

</body>
</html>
