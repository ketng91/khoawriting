<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Khoá Writing - Lớp Anh thầy Kết</title>

<!-- Font Awesome cho icon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
/* ===== BODY ===== */
body { 
  margin-left: 4cm; 
  margin-right: 4cm;
  font-family: Arial, sans-serif;
  padding: 20px;
  background-color: #f9f9f9;
  box-sizing: border-box;
}

/* ===== HEADER ===== */
header {
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  background-color: #ffd6ba;
  color: #7a4e3e;
  display: flex;
  flex-wrap: wrap;  /* cho phép xuống dòng khi màn hình nhỏ */
  align-items: center;
  justify-content: space-between;
  padding: 10px 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  z-index: 1000;
  font-family: Arial, sans-serif;
}

/* Left side */
.header-left {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 20px;
}
.header-left i {
  font-size: 28px;
  cursor: pointer;
}
.header-left a {
  color: white;
  text-decoration: none;
}
.header-left .header-text {
  font-weight: bold;
}

/* Center title */
.header-center {
  font-size: 24px;
  font-weight: bold;
  text-align: center;
  flex: 1 1 100%; /* chiếm hết dòng khi cần, giúp responsive */
  margin: 10px 0 0 0;
}

/* Optional: hover effect */
.header-left i:hover {
  color: #ffd700;
}

/* ====== LIST BOX TOPIC ====== */
#topicSelect {
  font-size: 20px;
  padding: 5px 10px;
  margin-top: 20px; /* tạo khoảng cách so với header cố định */
  margin-bottom: 20px;
  background-color: #f0f0f0;  /* xám nhạt */
  color: #000;
  border-radius: 6px;
  width: 100%;
  max-width: 500px;
}
/* ====== TOPIC FLEX ====== */
.topic-wrapper {
  display: flex;          /* xếp label + select theo hàng */
  align-items: center;    /* canh giữa theo chiều dọc */
  gap: 8px;               /* khoảng cách label và select */
  margin-top: 20px;       /* cách header */
  margin-bottom: 20px;    /* cách nội dung dưới */
}

#topicSelect {
  font-size: 20px;
  padding: 5px 10px;
  background-color: #f0f0f0;
  color: #000;
  border-radius: 6px;
  width: auto;            /* vừa nội dung */
  min-width: 200px;       /* không quá nhỏ */
}

/* Responsive nhỏ hơn 480px */
@media (max-width: 480px) {
  .topic-wrapper {
    gap: 5px;
    flex-wrap: wrap;      /* nếu quá nhỏ, label xuống dòng */
  }
  #topicSelect {
    font-size: 16px;
    min-width: 150px;
  }
}

/* ====== CÂU VN/EN ===== */
.sentence { 
  margin-bottom: 20px; 
  font-size: 25px; 
  line-height: 1.6; 
  word-break: break-word;
}
.highlight { 
  font-weight: bold; 
  padding: 2px 4px; 
  border-radius: 4px; 
}

/* ====== INPUT ROW ===== */
.input-row { 
  display: flex; 
  align-items: center; 
  gap: 8px; 
  margin-bottom: 8px; 
  flex-wrap: wrap;
}
.input-row input { 
   padding: 6px; 
   width: 400px;
   font-size: 22px;
   border: 1px solid #ccc;
   border-radius: 4px;
}
.arrow-icon { font-size: 18px; font-weight: bold; }
.result { margin-left: 10px; font-weight: bold; font-size: 22px; }
.correct { color: green; font-weight: bold; font-size: 18px; }
.wrong { color: red; font-weight: bold; font-size: 18px; }

/* ====== FULL ANSWER BOX ===== */
.full-answer-box { 
  width: 95%; 
  max-width: 100%;
  height: 100px; 
  padding: 8px; 
  font-size: 25px;
  font-family: Arial; 
  color: blue;
  border-radius: 10px;
  border: 5px solid #ccc;
  box-sizing: border-box;
}
.full-submit { padding: 10px 12px; }

/* ====== BUTTONS ===== */
button { 
  padding: 8px 15px; 
  margin-right: 10px; 
  cursor: pointer; 
  border-radius: 5px;
  border: none;
  font-size: 16px;
  flex-shrink: 0;
}
.green { background: lightgreen; }
.blue { background: lightblue; }
.yellow { background: khaki; }
.pink { background: pink; }

/* ====== CHỮ KÝ THẦY KẾT ===== */
.signature {
  font-size: 18px;
  font-family: Arial;
  font-style: italic;
  font-weight: bold;
  color: #004aad;
  text-align: right;
  margin-top: -25px;
}

/* ====== PHÁO HOA ===== */
.confetti {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 10px;
  height: 10px;
  background: red;
  opacity: 0.9;
  animation: pop 900ms ease-out forwards;
}
@keyframes pop {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  50% {
    transform: translate(calc(var(--x) * 0.5), calc(var(--y) * 0.4)) scale(1.1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--x), var(--y)) scale(0.5);
    opacity: 0;
  }
}

/* ====== RESPONSIVE MOBILE ===== */
@media (max-width: 480px) {
  body {
    margin-left: 10px;
    margin-right: 10px;
    padding: 10px;
  }

  .header-left {
    font-size: 18px;
    gap: 5px;
    flex-wrap: wrap;
  }
  .header-left i {
    font-size: 24px;
  }
  .header-center {
    font-size: 20px;
    text-align: left;
    width: 100%;
    margin: 5px 0;
  }

  #topicSelect {
    font-size: 16px;
    margin-top: 80px;
  }

  .sentence {
    font-size: 18px;
    line-height: 1.4;
  }

  .input-row {
    flex-direction: column;
    align-items: stretch;
    gap: 5px;
    margin-bottom: 10px;
  }
  .input-row input {
    width: 100%;
    font-size: 16px;
  }
  .arrow-icon, .result {
    font-size: 16px;
    margin-left: 0;
  }

  .full-answer-box {
    width: 100%;
    font-size: 16px;
    height: 80px;
  }
  .full-submit, #changeBtn {
    width: 100%;
    font-size: 16px;
    margin-bottom: 5px;
  }

  button {
    width: 100%;
    font-size: 16px;
    margin-bottom: 5px;
  }

  .signature {
    font-size: 16px;
    text-align: left;
    margin-top: 10px;
  }
}
</style>
</head>

<body>

<!-- ===== HEADER ===== -->
<header>
  <div class="header-left">
    <a href="https://ketng91.github.io/lopanhthayket/" target="_blank">
      <i class="fa fa-home"></i>
    </a>
    <span class="header-text">Lớp Anh thầy Kết</span>
  </div>
  <div class="header-center">Khoá Writing</div>
</header>

<!-- ===== CHỌN TOPIC ===== -->
<div class="topic-wrapper">
  <label for="topicSelect">Chọn topic:</label>
  <select id="topicSelect"></select>
</div>


<!-- ===== CÂU VN + EN ===== -->
<div class="sentence" id="vnSentence"></div>
<div class="sentence" id="enSentence"></div>

<!-- ===== INPUTS ===== -->
<div id="inputs"></div>

<textarea id="fullAnswer" class="full-answer-box" placeholder="Type the full sentence..."></textarea><br>

<button id="submitBtn" class="full-submit">Submit</button>
<button id="changeBtn" style="margin-left:15px;">Next sentence</button>

<div class="signature">Lớp Anh thầy Kết</div>
<div id="fullResult"></div>

</body>
</html>
<script>
/* ====== DATA THEO TOPIC ====== */
const dataByTopic = {
  "Environment": [
    {
      vn: "Các chính phủ nên thực thi các quy định môi trường nghiêm ngặt hơn để giảm thiểu những tác động tiêu cực của nóng lên toàn cầu đối với đa dạng sinh học.",
      parts: [
        { vn: "thực thi", en: "implement", color: "green" },
        { vn: "các quy định môi trường", en: "environmental regulations", color: "yellow" },
        { vn: "giảm thiểu", en: "mitigate", color: "blue" },
        { vn: "đa dạng sinh học", en: "biodiversity", color: "pink" }
      ],
      full: "Governments should implement stricter environmental regulations to mitigate the adverse effects of global warming on biodiversity."
    },
{
  vn: "Chính phủ nên thực hiện các chính sách để giảm thiểu tác hại về môi trường.",
  parts: [
    { vn: "thực hiện", en: "implement", color: "pink" },
    { vn: "giảm thiểu", en: "minimise", color: "green" },
    { vn: "tác hại về môi trường", en: "environmental damage", color: "yellow" }
  ],
  full: "Governments should implement policies to minimise environmental damage."
},
{
  vn: "Các cơ quan chức năng không nên đánh giá thấp mức độ nghiêm trọng của biến đổi khí hậu.",
  parts: [
    { vn: "Các cơ quan chức năng", en: "Authorities", color: "pink" },
    { vn: "đánh giá thấp", en: "downplay", color: "green" },
    { vn: "mức độ nghiêm trọng", en: "seriousness", color: "blue" },
    { vn: "biến đổi khí hậu", en: "climate change", color: "yellow" }
  ],
  full: "Authorities should not downplay the seriousness of climate change."
},
{
  vn: "Các chuyên gia cảnh báo rằng con người thường đánh giá thấp các tác động lâu dài của ô nhiễm không khí.",
  parts: [
    { vn: "đánh giá thấp", en: "underestimate", color: "green" },
    { vn: "các tác động lâu dài", en: "long-term effects", color: "pink" },
    { vn: "ô nhiễm không khí", en: "air pollution", color: "yellow" }
  ],
  full: "Experts warn that people often underestimate the long-term effects of air pollution."
},
{
  vn: "Biến đổi khí hậu có thể làm tồi tệ hơn các thiên tai, gây thiệt hại trên diện rộng.",
  parts: [
    { vn: "Biến đổi khí hậu", en: "Climate change", color: "pink" },
    { vn: "làm tồi tệ hơn", en: "worsen", color: "green" },
    { vn: "các thiên tai", en: "natural disasters", color: "yellow" }
  ],
  full: "Climate change can worsen natural disasters, causing widespread damage."
},
{
  vn: "Quy hoạch đô thị kém có thể gây ra tắc nghẽn giao thông và ô nhiễm ở các thành phố lớn.",
  parts: [
    { vn: "Quy hoạch đô thị", en: "urban planning", color: "pink" },
    { vn: "gây ra", en: "cause", color: "green" },
    { vn: "tắc nghẽn giao thông", en: "traffic congestion", color: "yellow" },
    { vn: "ô nhiễm", en: "pollution", color: "blue" }
  ],
  full: "Poor urban planning can cause traffic congestion and pollution in major cities."
},
{
  vn: "Việc phụ thuộc quá nhiều vào các nhiên liệu hóa thạch có thể dẫn đến sự suy thoái môi trường nghiêm trọng",
  parts: [
    { vn: "các nhiên liệu hóa thạch", en: "fossil fuels", color: "pink" },
    { vn: "dẫn đến", en: "lead to", color: "green" },
    { vn: "sự suy thoái môi trường", en: "environmental degradation", color: "yellow" }
  ],
  full: "Overreliance on fossil fuels may lead to severe environmental degradation."
},
    {
      vn: "Việc áp dụng các nguồn năng lượng tái tạo là then chốt để thúc đẩy sự phát triển bền vững và giảm thiểu tác động môi trường lâu dài của các hoạt động công nghiệp.",
      parts: [
        { vn: "các nguồn năng lượng tái tạo", en: "renewable energy sources", color: "green" },
        { vn: "sự phát triển bền vững", en: "sustainable development", color: "yellow" },
        { vn: "tác động môi trường", en: "environmental impact", color: "blue" },
      ],
      full: "Adopting renewable energy sources is crucial to promote sustainable development and reduce the long-term environmental impact of industrial activities."
    }
  ],
 
  "Technology": [
    {
      vn: "Sự tiến bộ nhanh chóng của trí tuệ nhân tạo có thể đòi hỏi một sự tái cấu trúc cơ bản đối với thị trường việc làm truyền thống trên toàn cầu.",
      parts: [
        { vn: "trí tuệ nhân tạo", en: "artificial intelligence", color: "green" },
        { vn: "đòi hỏi", en: "necessitate", color: "yellow" },
        { vn: "sự tái cấu trúc", en: "restructuring", color: "blue" },
        { vn: "thị trường việc làm", en: "job market", color: "pink" }
      ],
      full: "The rapid advancement of artificial intelligence may necessitate a fundamental restructuring of the traditional global job market."
    },
{
  vn: "Các chính sách của chính phủ thúc đẩy sự đổi mới trong công nghệ có thể dẫn đến tăng trưởng kinh tế lâu dài.",
  parts: [
    { vn: "thúc đẩy", en: "foster", color: "green" },
    { vn: "sự đổi mới", en: "innovation", color: "yellow" },
    { vn: "tăng trưởng kinh tế", en: "economic growth", color: "blue" }
  ],
  full: "Government policies that foster innovation in technology can lead to long-term economic growth."
},
{
  vn: "Các dự án năng lượng tái tạo có thể tạo ra cơ hội kinh tế bền vững cho các cộng đồng địa phương.",
  parts: [
    { vn: "năng lượng tái tạo", en: "renewable energy", color: "pink" },
    { vn: "tạo ra", en: "generate", color: "green" },
    { vn: "bền vững", en: "sustainable", color: "blue" },
    { vn: "các cộng đồng địa phương", en: "local communities", color: "yellow" }
  ],
  full: "Renewable energy projects can generate sustainable economic opportunities for local communities."
},
  ],







 "Economy-Housing": [
{
  vn: "Thuế cao có thể áp đặt áp lực tài chính cho các doanh nghiệp nhỏ.",
  parts: [
    { vn: "áp đặt", en: "impose", color: "pink" },
    { vn: "áp lực tài chính", en: " financial pressure", color: "green" },
    { vn: "doanh nghiệp nhỏ", en: "small businesses", color: "yellow" }
  ],
  full: "High taxes can impose financial pressure on small businesses."
},
{
  vn: "Nếu không được bảo trì đúng cách, cơ sở hạ tầng sẽ trở nên xấu đi nhanh chóng.",
  parts: [
    { vn: "bảo trì", en: "maintenance", color: "pink" },
    { vn: "cơ sở hạ tầng", en: "infrastructure", color: "yellow" },
    { vn: "sẽ trở nên xấu đi", en: "deteriorate", color: "green" },
  ],
  full: "Without proper maintenance, infrastructure will deteriorate rapidly."
},
{
  vn: "Các chi phí chăm sóc sức khỏe tăng đặt gánh nặng đáng kể lên các gia đình có thu nhập thấp.",
  parts: [
    { vn: "Các chi phí chăm sóc sức khỏe", en: "healthcare costs", color: "blue" },
    { vn: "gánh nặng", en: "burden", color: "pink" },
    { vn: "gia đình có thu nhập thấp", en: "low-income families", color: "yellow" }
  ],
  full: "Rising healthcare costs place a significant burden on low-income families."
},


 ],

 "Crime": [
{
  vn: "Sự phổ biển ngày càng tăng của tội phạm mạng đòi hỏi việc thực hiện các biện pháp an ninh mạng nghiêm ngặt hơn.",
  parts: [
    { vn: "tội phạm mạng", en: "cybercrime", color: "green" },
    { vn: "đòi hỏi", en: "necessitate", color: "pink" },
    { vn: "thực hiện", en: "implement", color: "yellow" },
    { vn: "các biện pháp an ninh mạng", en: "cybersecurity measures", color: "blue" }
  ],
  full: "The increasing prevalence of cybercrime necessitates implementing stricter cybersecurity measures."
},
{
  vn: "Hệ thống pháp lý không đầy đủ có thể khiến cho công tác thực thi pháp luật không hiệu quả trong việc ngăn chặn tội phạm.",
  parts: [
    { vn: "Hệ thống pháp lý", en: "legal frameworks", color: "pink" },
    { vn: "khiến cho", en: "render", color: "green" },
    { vn: "công tác thực thi pháp luật", en: "law enforcement", color: "yellow" },
    { vn: "ngăn chặn tội phạm", en: "prevent crime", color: "blue" }
  ],
  full: "Inadequate legal frameworks can render law enforcement ineffective in preventing crime."
},

  ],

 "Society": [
{
  vn: "Hợp tác quốc tế có thể củng cố các năng lực nghiên cứu và danh tiếng toàn cầu của một quốc gia.",
  parts: [
    { vn: "củng cố", en: "bolster", color: "green" },
    { vn: "các năng lực nghiên cứu", en: "research capabilities", color: "yellow" },
    { vn: "danh tiếng toàn cầu", en: "global reputation", color: "blue" }
  ],
  full: "International collaborations can bolster a country’s research capabilities and global reputation."
},
{
  vn: "Tham nhũng có thể làm xói mòn lòng tin của công chúng vào các cơ quan chính phủ.",
  parts: [
    { vn: "Tham nhũng", en: "Corruption", color: "pink" },
    { vn: "làm xói mòn", en: "erode", color: "green" },
    { vn: "lòng tin của công chúng", en: "public trust", color: "yellow" },
    { vn: "các cơ quan chính phủ", en: "government institutions", color: "blue" }
  ],
  full: "Corruption can erode public trust in government institutions."
},
{
  vn: "Các chính sách thiếu nhất quán có thể làm suy yếu các nỗ lực giảm nghèo.",
  parts: [
    { vn: "thiếu nhất quán", en: "Inconsistent", color: "pink" },
    { vn: "làm suy yếu", en: "undermine", color: "green" },
    { vn: "giảm nghèo", en: "reduce poverty", color: "yellow" }
  ],
  full: "Inconsistent policies may undermine efforts to reduce poverty."
},
{
  vn: "Các chính sách nhằm giảm bất bình đẳng thu nhập có thể tăng cường sự gắn kết và ổn định xã hội.",
  parts: [
    { vn: "bất bình đẳng thu nhập", en: "income inequality", color: "green" },
    { vn: "tăng cường", en: "strengthen", color: "pink" },
    { vn: "sự gắn kết", en: "cohesion", color: "yellow" }
  ],
  full: "Policies aimed at reducing income inequality can strengthen social cohesion and stability."
},
{
  vn: "Các thủ tục quan liêu thường cản trở việc ra quyết định hiệu quả trong các cơ quan công.",
  parts: [
    { vn: "Các thủ tục quan liêu", en: "Bureaucratic procedures", color: "pink" },
    { vn: "cản trở", en: "hinder", color: "green" },
    { vn: "việc ra quyết định", en: "decision-making", color: "yellow" },
    { vn: "các cơ quan công", en: "public institutions", color: "blue" }
  ],
  full: "Bureaucratic procedures often hinder efficient decision-making in public institutions."
},





  ],




  "Education": [
    {
      vn: "Khuyến khích các dự án nhóm tại trường học có thể thúc đẩy các kỹ năng hợp tác thiết yếu và nâng cao sự phát triển xã hội toàn diện của học sinh.",
      parts: [
        { vn: "các dự án nhóm", en: "group projects", color: "yellow" },
        { vn: "các kỹ năng hợp tác", en: "collaborative skills", color: "blue" },
        { vn: "nâng cao", en: "enhance", color: "green" },
        { vn: "sự phát triển xã hội", en: "social development", color: "pink" }
      ],
      full: "Encouraging group projects in schools can foster essential collaborative skills and enhance the overall social development of students."
    },
{
  vn: "Các trường học nên nuôi dưỡng kỹ năng tư duy phản biện ở học sinh để chuẩn bị cho những thách thức trong tương lai.",
  parts: [
    { vn: "nuôi dưỡng", en: "cultivate", color: "green" },
    { vn: "tư duy phản biện", en: "critical thinking", color: "yellow" },
    { vn: "những thách thức trong tương lai", en: "prepare for future challenges", color: "blue" }
  ],
  full: "Schools should cultivate critical thinking skills among students to prepare them for future challenges."
},
{
  vn: "Các nền tảng học trực tuyến có thể tạo điều kiện tiếp cận giáo dục chất lượng cho học sinh ở vùng xa.",
  parts: [
    { vn: "tạo điều kiện", en: "facilitate", color: "green" },
    { vn: "giáo dục chất lượng", en: "quality education", color: "yellow" },
    { vn: "vùng xa", en: "remote areas", color: "blue" }
  ],
  full: "Online learning platforms can facilitate access to quality education for students in remote areas."
},
{
  vn: "Việc tích hợp công nghệ hiện đại vào chương trình giảng dạy có thể nâng cao trải nghiệm học tập của học sinh.",
  parts: [
    { vn: "Việc tích hợp", en: "incorporating", color: "green" },
    { vn: "chương trình giảng dạy", en: "curriculum", color: "yellow" },
    { vn: "nâng cao", en: "enhance", color: "pink" },
    { vn: "trải nghiệm học tập", en: "students’ learning experiences", color: "blue" }
  ],
  full: "Incorporating modern technology into the curriculum can enhance students’ learning experiences."
},


  ],

"Health": [
{
  vn: "Các hệ thống y tế không đầy đủ có thể dẫn đến tỷ lệ tử vong cao hơn ở các nhóm dân cư dễ bị tổn thương.",
  parts: [
    { vn: "Các hệ thống y tế", en: "healthcare systems", color: "pink" },
    { vn: "dẫn đến", en: "result in", color: "green" },
    { vn: "tỷ lệ tử vong", en: "mortality rates", color: "yellow" },
    { vn: "nhóm dân cư dễ bị tổn thương", en: "vulnerable populations", color: "blue" }
  ],
  full: "Inadequate healthcare systems can result in higher mortality rates among vulnerable populations."
},
{
  vn: "Việc tiếp xúc quá mức với căng thẳng có thể làm giảm hiệu quả nhận thức.",
  parts: [
    { vn: "Việc tiếp xúc quá mức", en: "Overexposure", color: "pink" },
    { vn: "làm giảm", en: "diminish", color: "green" },
    { vn: "hiệu quả nhận thức", en: "cognitive performance", color: "yellow" }
  ],
  full: "Overexposure to stress can diminish cognitive performance."
},
{
  vn: "Việc sử dụng màn hình quá mức có thể làm trầm trọng thêm các vấn đề về sức khỏe tâm thần ở các thanh thiếu niên.",
  parts: [
    { vn: "Việc sử dụng màn hình", en: "screen time", color: "pink" },
    { vn: "làm trầm trọng thêm", en: "aggravate", color: "green" },
    { vn: "các vấn đề về sức khỏe tâm thần", en: "mental health issues", color: "yellow" },
    { vn: "các thanh thiếu niên", en: "adolescents", color: "blue" }
  ],
  full: "Excessive screen time may aggravate mental health issues among adolescents."
},
{
  vn: "Tập thể dục thường xuyên đóng góp vào sức khỏe cả về tinh thần lẫn thể chất.",
  parts: [
    { vn: "đóng góp vào", en: "contribute to", color: "green" },
    { vn: "sức khỏe", en: "well-being", color: "yellow" },
  ],
  full: "Regular physical exercise contributes to both mental and physical well-being."
},

 ],


"Work": [
{
  vn: "Cấp cho nhân viên quyền ra quyết định trao quyền cho họ chủ động hơn và nâng cao năng suất làm việc.",
  parts: [
    { vn: "quyền ra quyết định", en: "decision-making authority", color: "green" },
    { vn: "trao quyền", en: "empower", color: "pink" },
    { vn: "chủ động", en: "take initiative", color: "yellow" },
    { vn: "năng suất làm việc", en: "productivity", color: "blue" }
  ],
  full: "Providing employees with decision-making authority empowers them to take initiative and improve productivity."
},
{
  vn: "Khối lượng công việc quá lớn có thể làm choáng ngợp nhân viên, giảm năng suất làm việc.",
  parts: [
    { vn: "Khối lượng công việc", en: "workload", color: "pink" },
    { vn: "làm choáng ngợp", en: "overwhelm", color: "green" },
    { vn: "năng suất làm việc", en: "productivity", color: "yellow" }
  ],
  full: "Excessive workload can overwhelm employees, reducing productivity."
},
{
  vn: "Thất nghiệp tăng có thể làm trầm trọng thêm sự bất bình đẳng xã hội ở các khu vực đô thị.",
  parts: [
   { vn: "Thất nghiệp", en: "unemployment", color: "pink" },
    { vn: "làm trầm trọng thêm", en: "exacerbate", color: "green" },
    { vn: "sự bất bình đẳng xã hội", en: "social inequality", color: "yellow" },
    { vn: "khu vực đô thị", en: "urban areas", color: "blue" }
  ],
  full: "Rising unemployment can exacerbate social inequality in urban areas."
},
{
  vn: "Việc thực hiện giờ làm việc linh hoạt có thể giảm bớt căng thẳng cho nhân viên.",
  parts: [
   { vn: "thực hiện", en: "implement", color: "pink" },
   { vn: "giờ làm việc", en: "working hours", color: "yellow" },
   { vn: "giảm bớt căng thẳng", en: "alleviate stress", color: "green" },
  ],
  full: "Implementing flexible working hours can alleviate stress among employees."
},

  ],

"Art & Culture": [
{
  vn: "Đầu tư công vào các hoạt động văn hóa có thể kích thích sự sáng tạo và đổi mới trong xã hội.",
  parts: [
    { vn: "Đầu tư công", en: "Public investment", color: "pink" },
    { vn: "kích thích", en: "stimulate", color: "green" },
    { vn: "sự sáng tạo", en: "creativity", color: "yellow" },
    { vn: "đổi mới", en: "innovation", color: "blue" }
  ],
  full: "Public investment in cultural activities can stimulate creativity and innovation in society."
},
{
  vn: "Toàn cầu hóa đã thúc đẩy nhanh sự mai một văn hóa, khiến nhiều tập quán truyền thống dần biến mất.",
  parts: [
    { vn: "Toàn cầu hóa", en: "Globalization", color: "pink" },
    { vn: "thúc đẩy nhanh", en: "accelerate", color: "pink" },
    { vn: "sự mai một văn hóa", en: "cultural erosion", color: "green" },
    { vn: "tập quán truyền thống", en: "traditional practices", color: "yellow" },
  ],
  full: "Globalization has accelerated cultural erosion, leading many traditional practices to disappear."
},
{
  vn: "Du lịch đại chúng có thể thúc đẩy sự đồng nhất văn hóa, làm giảm tính độc đáo của các truyền thống địa phương.",
  parts: [
    { vn: "Du lịch đại chúng", en: "Mass tourism", color: "pink" },
    { vn: "sự đồng nhất văn hóa", en: "cultural homogeneity", color: "green" },
    { vn: "tính độc đáo", en: "uniqueness", color: "yellow" },
    { vn: "các truyền thống địa phương", en: "local traditions", color: "blue" },
  ],
  full: "Mass tourism may promote cultural homogeneity, reducing the uniqueness of local traditions."
},


  ],













};

let currentTopic = Object.keys(dataByTopic)[0];
let currentIndex = 0;

/* ====== TỰ ĐỘNG THÊM OPTION CHO TOPIC SELECT ====== */
const topicSelect = document.getElementById("topicSelect");
Object.keys(dataByTopic).sort().forEach(topic => {
  const opt = document.createElement("option");
  opt.value = topic;
  opt.textContent = topic;
  topicSelect.appendChild(opt);
});

/* ====== LOAD HÀM ====== */
function load() {
  const topicData = dataByTopic[currentTopic];
  const item = topicData[currentIndex];

  // highlight
  let html = item.vn;
  item.parts.forEach(p => {
    html = html.replace(new RegExp(p.vn, "gi"), `<span class="highlight ${p.color}">${p.vn}</span>`);
  });
  document.getElementById("vnSentence").innerHTML = html;

  // xóa input cũ
  const container = document.getElementById("inputs");
  container.innerHTML = "";
  item.parts.forEach((p, idx) => {
    const first = p.en[0];
    const wc = p.en.split(" ").length;
    const hint = `${p.vn} (${first}... ; ${wc} word${wc>1?'s':''})`;

    const row = document.createElement("div");
    row.className = "input-row";
    row.innerHTML = `
      <span class="arrow-icon" style="color:${p.color};">➤</span>
      <input id="box${idx}" placeholder="${hint}">
      <button onclick="checkWord(${idx})">Check</button>
      <span id="res${idx}" class="result"></span>
    `;
    container.appendChild(row);

    row.querySelector("input").addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        checkWord(idx);
      }
    });
  });

  document.getElementById("fullAnswer").value = "";
  document.getElementById("fullResult").innerHTML = "";
}

/* ====== NÚT CHANGE ====== */
document.getElementById("changeBtn").onclick = () => {
  const topicData = dataByTopic[currentTopic];
  currentIndex = (currentIndex + 1) % topicData.length;
  load();
};

/* ====== CHỌN TOPIC ====== */
topicSelect.value = currentTopic;
topicSelect.addEventListener("change", (e) => {
  currentTopic = e.target.value;
  currentIndex = 0;
  load();
});

/* ====== KIỂM TRA TỪ ====== */
window.checkWord = function(i) {
  const item = dataByTopic[currentTopic][currentIndex];
  const user = document.getElementById(`box${i}`).value.trim();
  const key = item.parts[i].en;
  const res = document.getElementById(`res${i}`);
  if (user.toLowerCase() === key.toLowerCase()) {
    res.innerHTML = `<span class="correct">✔ Correct</span>`;
    firework();
  } else {
    res.innerHTML = `<span class="wrong">✘ ${key}</span>`;
  }
};

/* ====== KIỂM TRA FULL CÂU ====== */
document.getElementById("submitBtn").onclick = () => {
  const item = dataByTopic[currentTopic][currentIndex];
  const user = document.getElementById("fullAnswer").value.trim();
  const res = document.getElementById("fullResult");
  if (user.toLowerCase() === item.full.toLowerCase()) {
    res.innerHTML = `<span class="correct">✔ Correct</span>`;
    firework();
  } else {
    res.innerHTML = `<span class="wrong">✘ ${item.full}</span>`;
  }
};

/* ====== ENTER SUBMIT ====== */
document.getElementById("fullAnswer").addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    e.preventDefault();
    document.getElementById("submitBtn").click();
  }
});

/* ====== PHÁO HOA ====== */
function firework() {
  for (let i = 0; i < 25; i++) {
    const conf = document.createElement("div");
    conf.className = "confetti";
    conf.style.setProperty("--x", (Math.random() - 0.5) * 600 + "px");
    conf.style.setProperty("--y", (Math.random() - 0.5) * 600 + "px");
    conf.style.backgroundColor = `hsl(${Math.random()*360},90%,60%)`;
    document.body.appendChild(conf);
    setTimeout(() => conf.remove(), 900);
  }
}

load();
</script>

</body>
</html>